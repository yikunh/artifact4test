<h1>README</h1>
<p>Binary Similarity Manual</p>
<h3>Directory Tree</h3>
<pre><code>binsim/
`-- jaccardIndex1			# executable that calculates similarity scores
`-- qemu-x86_64				# executable that generates function signatures
`-- analyse_time_file.txt	# txt that records the time cost for each signature generation
`-- random.txt				# txt that stores function parameters
`-- run-qemu-analysis.py	# script to get function signatures
`-- run-jaccard-x64.py		# script to generate similarity report
`-- test-binary/			# stores the binary pairs to test
`-- ...						
</code></pre>
<h3>How To Analysis</h3>
<p>We have already prepared data produced by ida pro.<br></p>
<ol>
<li>
<p>To get the function signatures of the programs:</p>
<pre><code class="language-bash">python3 run-qemu-analysis-x64.py programname
# e.g. python3 run-qemu-analysis-x64.py x64_wget_1_20_3_gcc75_O0
</code></pre>
<p>The result will be stored in ./programname/SigExtracted</p>
</li>
<li>
<p>If you want to get the signature of a specific function</p>
<pre><code class="language-bash">./qemu-x86_64 programname functionname
</code></pre>
<p>The result will be stored in ./programname/SigExtracted</p>
</li>
<li>
<p>To compare the signatures between programs, create a directory first</p>
<pre><code>foldername/
`-- log
</code></pre>
<p>and then run</p>
<pre><code class="language-bash">python3 run-jaccard-x64.py programname_O3 programmename_O0 foldername
</code></pre>
</li>
<li>
<p>To compare a specific function in functionA against functions in programB, create a directory first</p>
<pre><code>foldername/
`-- log
</code></pre>
<p>and then run</p>
<pre><code class="language-bash">python3 run-jaccard-x64.py programname_O3 programmename_O0 foldername functionname
</code></pre>
</li>
</ol>
<h3>How To read the result</h3>
<p>You will get the similarity report under the directory you have specified.</p>
<pre><code>folder/
`-- log/
`-- distinguished_log.txt
`-- error_result_log.txt
`-- result_log.txt
`-- routine_time_log.txt
</code></pre>
<ol>
<li>
<p>result_log.txt</p>
<p>This file records the similarity score between the same function but from differenct elfs(e.g. function acpt_write from x64_openssl_1_1_1g_gcc75_O0 and x64_openssl_1_1_1g_gcc75_O3)<br>
At the end of this file, an overall summary is recorded, which includes the number of functions in both programs, the correct number, precision and rankX rate(explained in distinguish_log.txt).</p>
</li>
<li>
<p>error_result_log.txt</p>
<p>This file records the false possitives and their corresponding similarity scores</p>
</li>
<li>
<p>distinguish_log.txt</p>
<p>This file records the true possitives.For each function in programA, we record all the functions in functionB that has the same similarities(also the highest) in this file. We calculate rankX,  the ratio of function pairs among all the true possitives where functionA has less than X most similar functions in programB.</p>
</li>
<li>
<p>routine_time_log.txt</p>
<p>This file records the time cost of comparing each function in programA with all the functions in programB</p>
</li>
<li>
<p>log/</p>
<p>This directory stores the similarity scores between each function in programA and all the functions in programB.</p>
</li>
</ol>
